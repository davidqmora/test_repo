@page "/"
@using WebUI.Services

@inject NavigationManager Navigation

<AuthorizeView>
    <Authorized>
        <MudText Typo="Typo.h1">Lamarr</MudText>
        <MudButton OnClick="@GetPhotos">Get Photos</MudButton>
    </Authorized>
    <NotAuthorized>
        <MudMainContent>
            <MudCard>
                <MudCardContent>
                    <MudText>
                        Authorized access required
                    </MudText>
                    <MudText>
                        This application requires authorized access. If you feel you should be able to see the content, please reach out to Cloud Services Team (Slack: #cloud-services) for assistance.
                    </MudText>
                </MudCardContent>
            </MudCard>
        </MudMainContent>
    </NotAuthorized>
</AuthorizeView>


@using Microsoft.Identity.Web
@inject MicrosoftIdentityConsentAndConditionalAccessHandler ConsentHandler
@inject IPhotoShareService PhotoShareService
@code {
    private async Task GetPhotos()
    {
        try
        {
            var response = await PhotoShareService.GetPhotos(CancellationToken.None);
            Console.WriteLine(response);
        }
        catch (Exception e)
        {
            ConsentHandler.HandleException(e);
        }
    }
}
